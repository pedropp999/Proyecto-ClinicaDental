@model Proyecto_DentalNova.Models.UsuarioViewModel.UsuarioVM

<div class="row g-4">

    <div class="col-12">
        <div class="card shadow-sm border-0">
            <div class="card-header bg-white py-3">
                <h6 class="m-0 fw-bold text-primary"><i class="fas fa-user-circle me-2"></i> Información Personal</h6>
            </div>
            <div class="card-body">
                <div class="row g-3">
                    <div class="col-md-6">
                        <label asp-for="Usuario.Nombre" class="form-label fw-bold small text-muted text-uppercase">Nombres</label>
                        <input asp-for="Usuario.Nombre" class="form-control" placeholder="Ej. Juan Carlos" />
                        <span asp-validation-for="Usuario.Nombre" class="text-danger small"></span>
                    </div>

                    <div class="col-md-6">
                        <label asp-for="Usuario.Apellidos" class="form-label fw-bold small text-muted text-uppercase">Apellidos</label>
                        <input asp-for="Usuario.Apellidos" class="form-control" placeholder="Ej. Pérez López" />
                        <span asp-validation-for="Usuario.Apellidos" class="text-danger small"></span>
                    </div>

                    <div class="col-md-4">
                        <label asp-for="Usuario.FechaNacimiento" class="form-label fw-bold small text-muted text-uppercase">Fecha Nacimiento</label>
                        <input asp-for="Usuario.FechaNacimiento" type="date" class="form-control" />
                        <span asp-validation-for="Usuario.FechaNacimiento" class="text-danger small"></span>
                    </div>

                    <div class="col-md-4">
                        <label asp-for="Usuario.Genero" class="form-label fw-bold small text-muted text-uppercase">Género</label>
                        <select asp-for="Usuario.Genero" class="form-select" asp-items="Model.Generos">
                            <option value="">Seleccione...</option>
                        </select>
                        <span asp-validation-for="Usuario.Genero" class="text-danger small"></span>
                    </div>

                    <div class="col-md-4">
                        <label asp-for="Usuario.CURP" class="form-label fw-bold small text-muted text-uppercase">CURP</label>
                        <div class="input-group">
                            <span class="input-group-text bg-light"><i class="fas fa-id-card text-muted"></i></span>
                            <input asp-for="Usuario.CURP" class="form-control" placeholder="18 Caracteres" style="text-transform:uppercase" />
                        </div>
                        <span asp-validation-for="Usuario.CURP" class="text-danger small"></span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="col-12 col-lg-6">
        <div class="card shadow-sm border-0 h-100">
            <div class="card-header bg-white py-3">
                <h6 class="m-0 fw-bold text-primary"><i class="fas fa-address-book me-2"></i> Contacto</h6>
            </div>
            <div class="card-body">
                <div class="mb-3">
                    <label asp-for="Usuario.CorreoElectronico" class="form-label fw-bold small text-muted text-uppercase">Correo Electrónico</label>
                    <div class="input-group">
                        <span class="input-group-text bg-light"><i class="fas fa-envelope text-muted"></i></span>
                        <input asp-for="Usuario.CorreoElectronico" class="form-control" placeholder="nombre@ejemplo.com" />
                    </div>
                    <span asp-validation-for="Usuario.CorreoElectronico" class="text-danger small"></span>
                </div>

                <div class="mb-3">
                    <label asp-for="Usuario.Telefono" class="form-label fw-bold small text-muted text-uppercase">Teléfono</label>
                    <div class="input-group">
                        <span class="input-group-text bg-light"><i class="fas fa-phone text-muted"></i></span>
                        <input asp-for="Usuario.Telefono" class="form-control" placeholder="(000) 000-0000" />
                    </div>
                    <span asp-validation-for="Usuario.Telefono" class="text-danger small"></span>
                </div>
            </div>
        </div>
    </div>

    <div class="col-12 col-lg-6">
        <div class="card shadow-sm border-0 h-100">
            <div class="card-header bg-white py-3">
                <h6 class="m-0 fw-bold text-primary"><i class="fas fa-shield-alt me-2"></i> Seguridad</h6>
            </div>
            <div class="card-body">
                <div class="mb-3">
                    <label asp-for="NewPassword" class="form-label fw-bold small text-muted text-uppercase">Contraseña</label>
                    <div class="input-group">
                        <span class="input-group-text bg-light"><i class="fas fa-key text-muted"></i></span>
                        <input asp-for="NewPassword" type="password" class="form-control password-field" placeholder="@(Model.Usuario.Id > 0 ? "Dejar vacío para mantener actual" : "Crear contraseña")" />
                        <button class="btn btn-outline-secondary toggle-password" type="button"><i class="fas fa-eye"></i></button>
                    </div>
                    <span asp-validation-for="NewPassword" class="text-danger small"></span>
                </div>

                <div class="mb-3">
                    <label asp-for="ConfirmPassword" class="form-label fw-bold small text-muted text-uppercase">Confirmar</label>
                    <div class="input-group">
                        <span class="input-group-text bg-light"><i class="fas fa-check-double text-muted"></i></span>
                        <input asp-for="ConfirmPassword" type="password" class="form-control password-field" placeholder="Repetir contraseña" />
                    </div>
                    <span asp-validation-for="ConfirmPassword" class="text-danger small"></span>
                </div>
            </div>
        </div>
    </div>

    <div class="col-12">
        <div class="card shadow-sm border-0">
            <div class="card-header bg-white py-3 d-flex justify-content-between align-items-center">
                <h6 class="m-0 fw-bold text-primary"><i class="fas fa-user-tag me-2"></i> Permisos y Acceso</h6>

                <div class="form-check form-switch m-0">
                    <input asp-for="Usuario.Activo" class="form-check-input" type="checkbox" role="switch" id="switchActivo" />
                    <label class="form-check-label fw-bold" for="switchActivo">Usuario Activo</label>
                </div>
            </div>
            <div class="card-body">
                <label class="form-label fw-bold small text-muted text-uppercase mb-3">Roles Asignados</label>

                <div class="row g-3">
                    @foreach (var rol in Model.RolesDisponibles)
                    {
                        <div class="col-12 col-sm-6 col-md-4 col-lg-3">
                            <div class="form-check p-3 border rounded bg-light hover-shadow h-100 contenedor">
                                <input class="form-check-input"
                                       type="checkbox"
                                       name="RolesSeleccionados"
                                       value="@rol.Value"
                                       id="rol_@rol.Value"
                                       @(Model.RolesSeleccionados.Contains(rol.Value) ? "checked" : "")
                                       style="transform: scale(1.2); margin-top: 0.3rem; margin-left: 0px;" />

                                <label class="form-check-label ms-2 fw-bold stretched-link" for="rol_@rol.Value">
                                    @rol.Text
                                </label>
                                <div class="small text-muted ms-2 mt-1">Acceso nivel @rol.Text</div>
                            </div>
                        </div>
                    }
                </div>

                <div class="alert alert-info mt-3 mb-0 py-2 small">
                    <i class="fas fa-info-circle me-1"></i> El rol "Paciente" se asigna automáticamente a los registros externos.
                </div>
            </div>
        </div>
    </div>
</div>